<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1" />
<title>Dashboard</title>
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />

<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" />

</head>
<body>

<div class="container text-center">
	<div>
		<form th:action="@{/logout}" method="post">
			<p>
				Welcome <b><span sec:authentication="principal.fullName"></span></b>
			</p>
			
		
			<input type="submit" value="Sign Out" />
		</form>
	</div>

	<script src="https://code.highcharts.com/highcharts.js"></script>
	<script src="https://code.highcharts.com/highcharts-3d.js"></script>
	<script src="https://code.highcharts.com/modules/exporting.js"></script>

	<div id="container" style="height: 400px"></div>
	<script th:inline="javascript">
		Highcharts.chart('container', {
			chart : {
				type : 'pie',
				options3d : {
					enabled : true,
					alpha : 50,
					beta : 0
				}
			},
			title : {
				text : 'Ticket Status'
			},
			tooltip : {
				pointFormat : '{series.name}: <b>{point.percentage:.1f}%</b>'
			},
			plotOptions : {
				pie : {
					allowPointSelect : true,
					cursor : 'pointer',
					depth : 35,
					dataLabels : {
						enabled : true,
						format : '{point.name}'
					}
				}
			},
			series : [ {
				type : 'pie',
				name : 'Ratio',
				data : [ [ 'Resolved', [[${resolved}]] ], [ 'Pending', [[${pending}]] ]  ]
			} ]
		});
	</script>
	
	<div>
		<table class="table table-striped table-bordered">
		<caption>Tickets Record of last 30 days </caption>
			<thead class="thead-dark">
				<tr>
					<th>Query</th>
					<th>Service</th>
					<th>Complaint</th>
					<th>Total</th>
				</tr>
			</thead>
			<tbody>
			
				<tr>
					<td th:text="${query}">Query</td>
					<td th:text="${service}">Service</td>
					<td th:text="${complaint}">Complaint</td>
					<td th:text="${total}">Total</td>
				</tr>
			</tbody>
		</table>
	</div>
	
	<form th:action = "@{/redirect}" method = "request">
		<div>
			<button type="submit" class="btn btn-primary">View Tickets</button> 
		</div>
	</form>
</body>
</html>